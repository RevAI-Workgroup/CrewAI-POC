# [3-9] Chat Message Schemas

## Description
Create request/response models for chat functionality including ChatMessageRequest, ChatMessageResponse, and streaming response models. These schemas will handle chat-specific messaging patterns including optional output specifications and streaming response chunks.

## Status History
| Timestamp | Event | From Status | To Status | Details | User |
|-----------|-------|-------------|-----------|---------|------|
| 2024-12-27 16:00:00 | user_approves | Proposed | Agreed | User approved task scope and implementation approach | User |
| 2024-12-27 16:00:00 | start_work | Agreed | InProgress | Beginning implementation of chat message schemas | AI Agent |
| 2024-12-27 16:15:00 | submit_for_review | InProgress | Review | Completed schema implementation with tests | AI Agent |
| 2024-12-27 16:15:00 | approve | Review | Done | All schemas implemented and tested successfully | AI Agent |

## Requirements
1. **ChatMessageRequest Schema**:
   - `message`: Required string field (min_length=1) for message content
   - `output`: Optional string field for expected output format/constraints
   - `threadId`: Required string field for thread identification
   - Proper validation for all fields

2. **ChatMessageResponse Schema**:
   - Standard message response fields
   - Chat-specific metadata fields
   - Streaming status indicators

3. **ChatStreamChunk Schema**:
   - Content chunk for streaming responses
   - Message ID reference
   - Status indicators (processing, done, error)

4. **Error Response Schemas**:
   - Chat-specific error handling
   - Graph validation error responses
   - CrewAI execution error responses

## Implementation Plan
1. Add ChatMessageRequest to `backend/schemas/message_schemas.py`
2. Add ChatMessageResponse schema
3. Add ChatStreamChunk schema for streaming responses
4. Add chat-specific validation methods
5. Update imports and exports as needed

## Test Plan
**Scope**: Unit tests for schema validation
**Environment**: pytest with pydantic validation
**Key Scenarios**:
- Valid ChatMessageRequest validation
- Invalid message content handling
- Optional output field behavior
- Thread ID validation
- Error response schema validation

**Success Criteria**:
- All schemas validate correctly with valid data
- Proper error messages for invalid data
- Compatible with existing message schema patterns

## Verification
- [x] ChatMessageRequest schema created with proper validation
- [x] ChatMessageResponse schema includes all required fields
- [x] ChatStreamChunk schema supports streaming functionality
- [x] Schemas follow existing patterns and conventions
- [x] All validation rules work correctly
- [x] Integration with existing message schemas is seamless

## Files Modified
- `backend/schemas/message_schemas.py` - Add chat message schemas 